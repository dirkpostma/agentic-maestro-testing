appId: com.agentic.maestrotesting
---
# Counter App E2E Test Flow
# Tests basic counter functionality and history feature

- launchApp

# Handle Expo Dev Client launcher - tap on the recently opened project
- runFlow:
    when:
      visible: "No development servers found"
    commands:
      - tapOn: "agentic-maestro-testing"

# Dismiss developer menu modal if it appears
- runFlow:
    when:
      visible: "Continue"
    commands:
      - tapOn: "Continue"

# Dismiss dev tools menu if it appears (tap outside or X button)
- runFlow:
    when:
      visible: "Toggle performance monitor"
    commands:
      - tapOn:
          point: "50%,10%"

# Wait for app to load
- extendedWaitUntil:
    visible: "Counter App"
    timeout: 15000

# Verify initial state
- assertVisible: "Counter App"
- assertVisible: "Count: 0"

# Verify history section exists and is empty
- assertVisible: "History"
- assertVisible: "No history yet"

# Test increment and verify history entry appears
- tapOn:
    id: "increment-button"
- assertVisible: "Count: 1"
- assertVisible:
    id: "history-entry-0"

- tapOn:
    id: "increment-button"
- assertVisible: "Count: 2"

- tapOn:
    id: "increment-button"
- assertVisible: "Count: 3"

# Test decrement
- tapOn:
    id: "decrement-button"
- assertVisible: "Count: 2"

- tapOn:
    id: "decrement-button"
- assertVisible: "Count: 1"

# Test reset
- tapOn:
    id: "reset-button"
- assertVisible: "Count: 0"

# Test decrement below zero
- tapOn:
    id: "decrement-button"
- assertVisible: "Count: -1"

# Test clear history button
- tapOn:
    id: "clear-history-button"
- assertVisible: "No history yet"

# Verify counter still works after clearing history
- tapOn:
    id: "reset-button"
- assertVisible: "Count: 0"

- tapOn:
    id: "increment-button"
- assertVisible: "Count: 1"
- assertVisible:
    id: "history-entry-0"
